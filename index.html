<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Interactivo - Percepci칩n Social Paracel</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- CSS -->
    <link rel="stylesheet" href="style.css?v=4">
</head>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
<!-- Data -->
<script src="data.js"></script>
</head>

<body>

    <!-- PANTALLA DE LOGIN -->
    <div id="login-screen" class="glass-container">
        <div class="login-box">
            <img src="LOGO_PARA_FONDO_NEGRO.png" alt="Logo Paracel" class="logo-login">
            <h2>Acceso al Dashboard</h2>
            <p>Monitoreo de Impacto Social</p>
            <div class="input-group">
                <input type="text" id="username" placeholder="Usuario" autocomplete="off">
            </div>
            <div class="input-group">
                <input type="password" id="password" placeholder="Contrase침a">
            </div>
            <p id="login-error" class="error-msg" style="display: none;">Credenciales incorrectas.</p>
            <button id="btn-login" class="btn-primary">Ingresar</button>
        </div>
    </div>

    <!-- PANTALLA DEL DASHBOARD (Oculta por defecto) -->
    <div id="dashboard-screen" style="display: none;">

        <!-- NAVBAR -->
        <nav class="navbar glass-navbar">
            <div class="nav-left">
                <img src="LOGO_PARA_FONDO_NEGRO.png" alt="Logo Paracel" class="logo-nav">
                <h1>Monitoreo de Percepci칩n (2022 - 2024)</h1>
            </div>
            <div class="nav-right" style="display:flex; align-items:center; gap:15px;">
                <span id="total-encuestas" style="font-weight:bold;">Total Encuestas: 0</span>
                <button id="btn-theme" class="btn-outline" style="padding:5px 10px; font-size:12px; cursor:pointer;"
                    title="Cambiar a Modo Oscuro">游깿 Dark</button>
                <button id="btn-export" class="btn-outline" style="padding:5px 10px; font-size:12px;">Exportar
                    PNG</button>
                <button id="btn-logout" class="btn-secondary" style="padding:5px 10px; font-size:12px;">Cerrar
                    Sesi칩n</button>
            </div>
        </nav>

        <div class="main-layout">
            <!-- SIDEBAR FILTROS -->
            <aside class="sidebar glass-panel">
                <h3>Filtros Din치micos</h3>
                <p class="filter-instructions">Selecciona uno o m치s botones para filtrar los datos.</p>

                <div class="filter-group">
                    <label title="A칤sla personas que respondieron encuestas en m칰ltiples a침os.">
                        Tipo de Muestra <span style="cursor:help; color:var(--paracel-blue);"
                            title="S칤 = Panelistas a lo largo del tiempo. No = Encuestados 칰nicos. Todos = Sin filtro.">(i)</span>
                    </label>
                    <div class="filter-buttons" id="filter-muestra"></div>
                </div>

                <div class="filter-group">
                    <label title="Clasificaci칩n autom치tica en cruce de P23 y P25">
                        Percepci칩n General <span style="cursor:help; color:var(--paracel-blue);"
                            title="Clasifica seg칰n menciones directas en aspectos positivos y barreras.">(i)</span>
                    </label>
                    <div class="filter-buttons" id="filter-percepcion"></div>
                </div>

                <div class="filter-group">
                    <label title="Filtra los resultados por la ola de ejecuci칩n.">
                        A침o de la Ola <span style="cursor:help; color:var(--paracel-blue);"
                            title="Selecciona uno con clic simple. Selecciona m칰ltiples a la vez manteniendo presionada la tecla CTRL.">(i)</span>
                    </label>
                    <div class="filter-buttons" id="filter-anio"></div>
                </div>

                <div class="filter-group">
                    <label>G칠nero</label>
                    <div class="filter-buttons" id="filter-genero"></div>
                </div>

                <div class="filter-group">
                    <label>Rango de Edad</label>
                    <div class="filter-buttons" id="filter-edad"></div>
                </div>

                <div class="filter-group">
                    <label>Nivel Socioecon칩mico (NSE)</label>
                    <div class="filter-buttons" id="filter-nse"></div>
                </div>

                <div class="filter-group">
                    <label>Comunidad</label>
                    <div class="filter-buttons" id="filter-comunidad"></div>
                </div>

                <button id="btn-reset" class="btn-outline">Restablecer Todos</button>
            </aside>

            <!-- ZONA DE PESTA칌AS Y GRAFICOS -->
            <main class="dashboard-content">

                <!-- KPI HEADER -->
                <div class="kpi-header" style="display:flex; gap:15px; margin-bottom:20px;">
                    <div class="kpi-card"
                        style="flex:1; background:var(--glass-bg); padding:15px; border-radius:8px; border:1px solid var(--glass-border); border-left:4px solid var(--accent); box-shadow:0 4px 6px rgba(0,0,0,0.05);">
                        <h4 style="margin:0; font-size:12px; color:var(--text-sec); text-transform:uppercase;">Encuestas
                            Efectivas (N)</h4>
                        <p id="kpi-total" style="margin:5px 0 0; font-size:24px; font-weight:700; color:var(--accent);">
                            -</p>
                    </div>
                    <div class="kpi-card"
                        style="flex:1; background:var(--glass-bg); padding:15px; border-radius:8px; border:1px solid var(--glass-border); border-left:4px solid var(--paracel-blue); box-shadow:0 4px 6px rgba(0,0,0,0.05);">
                        <h4 style="margin:0; font-size:12px; color:var(--text-sec); text-transform:uppercase;">
                            Percepci칩n Positiva a Paracel</h4>
                        <p id="kpi-positiva"
                            style="margin:5px 0 0; font-size:24px; font-weight:700; color:var(--paracel-blue);">-</p>
                    </div>
                    <div class="kpi-card"
                        style="flex:1; background:var(--glass-bg); padding:15px; border-radius:8px; border:1px solid var(--glass-border); border-left:4px solid #ef4444; box-shadow:0 4px 6px rgba(0,0,0,0.05);">
                        <h4 style="margin:0; font-size:12px; color:var(--text-sec); text-transform:uppercase;">Top #1
                            Problema</h4>
                        <p id="kpi-problema"
                            style="margin:5px 0 0; font-size:16px; font-weight:700; color:#ef4444; line-height:1.2;">-
                        </p>
                    </div>
                    <div class="kpi-card"
                        style="flex:1; background:var(--glass-bg); padding:15px; border-radius:8px; border:1px solid var(--glass-border); border-left:4px solid var(--orange-accent); box-shadow:0 4px 6px rgba(0,0,0,0.05);">
                        <h4 style="margin:0; font-size:12px; color:var(--text-sec); text-transform:uppercase;">Top #1
                            Atributo Lider</h4>
                        <p id="kpi-atributo"
                            style="margin:5px 0 0; font-size:16px; font-weight:700; color:var(--orange-accent); line-height:1.2;">
                            -</p>
                    </div>
                </div>

                <!-- TABS NAV -->
                <div class="tabs-nav">
                    <button class="tab-btn active" data-tab="tab-comunidad">1. Comunidad</button>
                    <button class="tab-btn" data-tab="tab-paracel">2. F치brica y Comunicaci칩n</button>
                    <button class="tab-btn" data-tab="tab-perfil">3. Perfil Demogr치fico</button>
                    <button class="tab-btn" data-tab="tab-evolucion"
                        style="color:var(--orange-accent); font-weight:800;">4. Evoluci칩n Clave (2022-2025)</button>
                </div>

                <!-- TAB 1: COMUNIDAD -->
                <div class="tab-content active" id="tab-comunidad">
                    <h2 class="tab-title">Percepci칩n de la Comunidad</h2>
                    <div class="charts-row">
                        <div class="chart-container glass-panel" style="flex: 100%; max-width: 100%;">
                            <h3 title="P2: Comunidad (Distribuci칩n de la Muestra)">Distribuci칩n por Comunidades
                                Encuestadas <span style="cursor:help;"
                                    title="P2: Comunidad (Georeferenciaci칩n)">(i)</span></h3>
                            <div class="canvas-wrapper"><canvas id="chartComunidades"></canvas></div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">
                                <strong>P2:</strong> Mapeo de comunidades de residencia de los encuestados.
                            </p>
                        </div>
                    </div>
                    <div class="charts-row">
                        <div class="chart-container glass-panel">
                            <h3
                                title="P15: 쮺u치les son los principales aspectos positivos de vivir en tu ciudad/ comunidad?">
                                Aspectos Positivos de la Comunidad <span style="cursor:help;"
                                    title="P15: 쮺u치les son los principales aspectos positivos de vivir en tu ciudad/ comunidad?">(i)</span>
                            </h3>
                            <div class="canvas-wrapper"><canvas id="chartPositivos"></canvas></div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">
                                <strong>P15:</strong> 쮺u치les son los principales aspectos positivos de vivir en tu
                                ciudad/ comunidad?
                            </p>
                        </div>
                    </div>
                    <div class="charts-row">
                        <div class="chart-container glass-panel">
                            <h3
                                title="P16: 쮺u치les son los principales problemas identificados en tu ciudad/comunidad?">
                                Problemas / Aspectos Negativos <span style="cursor:help;"
                                    title="P16: 쮺u치les son los principales problemas identificados en tu ciudad/comunidad?">(i)</span>
                            </h3>
                            <div class="canvas-wrapper"><canvas id="chartNegativos"></canvas></div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">
                                <strong>P16:</strong> 쮺u치les son los principales problemas identificados en tu
                                ciudad/comunidad?
                            </p>
                        </div>
                    </div>
                </div>

                <!-- TAB 2: PARACEL Y COMUNICACION -->
                <div class="tab-content" id="tab-paracel" style="display: none;">
                    <h2 class="tab-title">Percepci칩n sobre Paracel</h2>
                    <div class="charts-row">
                        <div class="chart-container glass-panel">
                            <h3
                                title="P23: 쯈u칠 aspectos positivos ya viste en tu ciudad/comunidad desde que empez칩 la construcci칩n de Paracel?">
                                Expectativas Positivas sobre la F치brica <span style="cursor:help;"
                                    title="P23: 쯈u칠 aspectos positivos ya viste en tu ciudad/comunidad desde que empez칩 la construcci칩n de Paracel?">(i)</span>
                            </h3>
                            <div class="canvas-wrapper"><canvas id="chartExpectativas"></canvas></div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">
                                <strong>P23:</strong> 쯈u칠 aspectos positivos ya viste en tu ciudad/comunidad desde que
                                empez칩 la construcci칩n de Paracel?
                            </p>
                        </div>
                        <div class="chart-container glass-panel">
                            <h3 title="P25: 쮺rees que hay alg칰n aspecto negativo en el proyecto de Paracel? 쮺u치les?">
                                Temores /
                                Preocupaciones sobre la F치brica (General) <span style="cursor:help;"
                                    title="P25: 쮺rees que hay alg칰n aspecto negativo en el proyecto de Paracel? 쮺u치les?">(i)</span>
                            </h3>
                            <div class="canvas-wrapper"><canvas id="chartTemores"></canvas></div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">
                                <strong>P25:</strong> 쮺rees que hay alg칰n aspecto negativo en el proyecto de Paracel?
                                쮺u치les?
                            </p>
                        </div>
                    </div>
                    <div class="charts-row">
                        <div class="chart-container glass-panel">
                            <h3
                                title="P20: 쮸 trav칠s de qu칠 medio/s te enteraste sobre la empresa de producci칩n de celulosa Paracel?">
                                Recepci칩n de Informaci칩n (Medios) <span style="cursor:help;"
                                    title="P20: 쮸 trav칠s de qu칠 medio/s te enteraste sobre la empresa de producci칩n de celulosa Paracel?">(i)</span>
                            </h3>
                            <div class="canvas-wrapper"><canvas id="chartMedios"></canvas></div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">
                                <strong>P20:</strong> 쮸 trav칠s de qu칠 medio/s te enteraste sobre la empresa de
                                producci칩n de celulosa Paracel?
                            </p>
                        </div>
                    </div>
                </div>

                <!-- TAB 3: PERFIL DEMOGRAFICO -->
                <div class="tab-content" id="tab-perfil" style="display: none;">
                    <h2 class="tab-title">Perfil Sociodemogr치fico</h2>

                    <div class="charts-row">
                        <div class="chart-container glass-panel">
                            <h3 title="P7: 쮺u치l es tu nivel de estudios?">Nivel de Estudios <span
                                    style="cursor:help; color:var(--paracel-blue);"
                                    title="P7: 쮺u치l es tu nivel de estudios?">(i)</span></h3>
                            <div class="canvas-wrapper" style="min-height: 350px;"><canvas id="chartEstudios"></canvas>
                            </div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">
                                <strong>P7:</strong> 쮺u치l es tu nivel de estudios?
                            </p>
                        </div>
                        <div class="chart-container glass-panel">
                            <h3 title="P10: 쮺u치l es tu ocupaci칩n actual?">Situaci칩n Laboral <span
                                    style="cursor:help; color:var(--paracel-blue);"
                                    title="P10: 쮺u치l es tu ocupaci칩n actual?">(i)</span></h3>
                            <div class="canvas-wrapper" style="min-height: 350px;"><canvas id="chartTrabajo"></canvas>
                            </div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">
                                <strong>P10:</strong> 쮺u치l es tu ocupaci칩n actual?
                            </p>
                        </div>
                    </div>

                    <div class="charts-row">
                        <div class="chart-container glass-panel">
                            <h3 title="P8: 쮺u치l es el ingreso mensual familiar en tu hogar?">Ingresos Familiares
                                (Series Interanuales) <span style="cursor:help;"
                                    title="P8: 쮺u치l es el ingreso mensual familiar en tu hogar?">(i)</span>
                            </h3>
                            <div class="canvas-wrapper"><canvas id="chartIngresos"></canvas></div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">
                                <strong>P8:</strong> 쮺u치l es el ingreso mensual familiar en tu hogar?
                            </p>
                        </div>
                    </div>

                </div> <!-- Fin Tab 3 -->

                <!-- TAB 4: EVOLUCION -->
                <div class="tab-content" id="tab-evolucion" style="display: none;">
                    <h2 class="tab-title" style="color:var(--accent); border-bottom-color:var(--orange-accent);">
                        Indicadores Evolutivos Clave (2022-2025)</h2>
                    <p style="color:var(--text-sec); font-size:14px; margin-bottom:15px;">
                        Estos gr치ficos muestran los cambios m치s significativos en la percepci칩n y situaci칩n de las
                        comunidades a trav칠s del tiempo. Se recomienda visualizar con todos los a침os seleccionados
                        (marcando con la tecla CTRL).
                    </p>

                    <div class="charts-row">
                        <div class="chart-container">
                            <h3 title="Tendencia de favorabilidad a lo largo de los a침os">1. Percepci칩n Positiva de
                                Paracel (%)</h3>
                            <div class="canvas-wrapper"><canvas id="chartEvolPositiva"></canvas></div>
                            <p class="chart-note">Interpretaci칩n: Curva hist칩rica que visualiza el pico de aceptaci칩n y
                                desgaste de expectativas (l칤nea).</p>
                        </div>
                        <div class="chart-container">
                            <h3 title="El problema cr칤tico en constante crecimiento">2. Falta de Oferta Laboral como
                                Problema (%)</h3>
                            <div class="canvas-wrapper"><canvas id="chartEvolFaltaLaboral"></canvas></div>
                            <p class="chart-note">Interpretaci칩n: Preocupaci칩n comunitaria constante por el empleo local
                                vs avances del proyecto (barras).</p>
                        </div>
                    </div>

                    <div class="charts-row">
                        <div class="chart-container">
                            <h3 title="Cambio en atributos l칤deres de las comunidades">3. Atributos: Tranquilidad vs La
                                Gente</h3>
                            <div class="canvas-wrapper"><canvas id="chartEvolAtributos"></canvas></div>
                            <p class="chart-note">Interpretaci칩n: Desplazamiento de "La tranquilidad" por "La gente"
                                como aspecto m치s valorado (barras agrupadas).</p>
                        </div>
                        <div class="chart-container">
                            <h3 title="Reducci칩n del desconocimiento 'No sabe' vs 'Celulosa/Eucalipto'">4.
                                Desconocimiento vs Comprensi칩n</h3>
                            <div class="canvas-wrapper"><canvas id="chartEvolProduccion"></canvas></div>
                            <p class="chart-note">Interpretaci칩n: Reducci칩n del "NS/NR" sobre la producci칩n a favor del
                                "Eucalipto/Celulosa" (치reas/barras).</p>
                        </div>
                    </div>

                    <div class="charts-row">
                        <div class="chart-container">
                            <h3 title="Creaci칩n de puestos vs Mejoras en caminos">5. Beneficios vs Expectativas Reales
                            </h3>
                            <div class="canvas-wrapper"><canvas id="chartEvolBeneficios"></canvas></div>
                            <p class="chart-note">Interpretaci칩n: Ca칤da en percepci칩n de nuevos empleos contra un
                                aparente aumento en valoraci칩n infraestructural (l칤nea).</p>
                        </div>
                        <div class="chart-container">
                            <h3 title="Fuentes de informaci칩n dominantes">6. Canales de Comunicaci칩n Relevantes</h3>
                            <div class="canvas-wrapper"><canvas id="chartEvolCanales"></canvas></div>
                            <p class="chart-note">Interpretaci칩n: Crecimiento de canales directos y digitales frente a
                                rumores (barras apiladas o sectores).</p>
                        </div>
                    </div>
                </div> <!-- Fin Tab 4 -->

            </main>
        </div>
    </div>

    <!-- JS -->
    <script src="script.js?v=4"></script>
</body>

</html>