<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Interactivo - Percepción Social Paracel</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <!-- Data -->
    <script src="data.js"></script>
</head>

<body>

    <!-- PANTALLA DE LOGIN -->
    <div id="login-screen" class="glass-container">
        <div class="login-box">
            <img src="LOGO_PARA_FONDO_NEGRO.png" alt="Logo Paracel" class="logo-login">
            <h2>Acceso al Dashboard</h2>
            <p>Monitoreo de Impacto Social</p>
            <div class="input-group">
                <input type="text" id="username" placeholder="Usuario" autocomplete="off">
            </div>
            <div class="input-group">
                <input type="password" id="password" placeholder="Contraseña">
            </div>
            <p id="login-error" class="error-msg" style="display: none;">Credenciales incorrectas.</p>
            <button id="btn-login" class="btn-primary">Ingresar</button>
        </div>
    </div>

    <!-- PANTALLA DEL DASHBOARD (Oculta por defecto) -->
    <div id="dashboard-screen" style="display: none;">

        <!-- NAVBAR -->
        <nav class="navbar glass-navbar">
            <div class="nav-left">
                <img src="LOGO_PARA_FONDO_NEGRO.png" alt="Logo Paracel" class="logo-nav">
                <h1>Monitoreo de Percepción (2022 - 2024)</h1>
            </div>
            <div class="nav-right">
                <span id="total-encuestas">Total Encuestas: 0</span>
                <button id="btn-logout" class="btn-secondary">Cerrar Sesión</button>
            </div>
        </nav>

        <div class="main-layout">
            <!-- SIDEBAR FILTROS -->
            <aside class="sidebar glass-panel">
                <h3>Filtros Dinámicos</h3>
                <p class="filter-instructions">Selecciona uno o más botones para filtrar los datos.</p>

                <div class="filter-group">
                    <label title="Aísla personas que respondieron encuestas en múltiples años.">
                        Tipo de Muestra <span style="cursor:help; color:var(--paracel-blue);"
                            title="Sí = Panelistas a lo largo del tiempo. No = Encuestados únicos. Todos = Sin filtro.">(i)</span>
                    </label>
                    <div class="filter-buttons" id="filter-muestra"></div>
                </div>

                <div class="filter-group">
                    <label title="Filtra los resultados por la ola de ejecución.">
                        Año de la Ola <span style="cursor:help; color:var(--paracel-blue);"
                            title="Selecciona uno con clic simple. Selecciona múltiples a la vez manteniendo presionada la tecla CTRL.">(i)</span>
                    </label>
                    <div class="filter-buttons" id="filter-anio"></div>
                </div>

                <div class="filter-group">
                    <label>Género</label>
                    <div class="filter-buttons" id="filter-genero"></div>
                </div>

                <div class="filter-group">
                    <label>Rango de Edad</label>
                    <div class="filter-buttons" id="filter-edad"></div>
                </div>

                <div class="filter-group">
                    <label>Nivel Socioeconómico (NSE)</label>
                    <div class="filter-buttons" id="filter-nse"></div>
                </div>

                <div class="filter-group">
                    <label>Comunidad</label>
                    <div class="filter-buttons" id="filter-comunidad"></div>
                </div>

                <button id="btn-reset" class="btn-outline">Restablecer Todos</button>
            </aside>

            <!-- ZONA DE PESTAÑAS Y GRAFICOS -->
            <main class="dashboard-content">

                <!-- TABS NAV -->
                <div class="tabs-nav">
                    <button class="tab-btn active" data-tab="tab-comunidad">Módulo 1: Comunidad</button>
                    <button class="tab-btn" data-tab="tab-paracel">Módulo 2: Fábrica y Comunicación</button>
                    <button class="tab-btn" data-tab="tab-perfil">Módulo 3: Perfil Demográfico</button>
                    <button class="tab-btn" data-tab="tab-panel">Módulo 4: Análisis Panel</button>
                </div>

                <!-- TAB 1: COMUNIDAD -->
                <div class="tab-content active" id="tab-comunidad">
                    <h2 class="tab-title">Percepción de la Comunidad</h2>
                    <div class="charts-row">
                        <div class="chart-container glass-panel">
                            <h3 title="Comparación porcentual de aspectos positivos mencionados a través de los años.">
                                Aspectos Positivos de la Comunidad <span style="cursor:help;"
                                    title="Valores en porcentaje de menciones totales en el año">(i)</span></h3>
                            <div class="canvas-wrapper"><canvas id="chartPositivos"></canvas></div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">Nota:
                                Iteración anual. Fuente: Encuestas Nauta (2022-2025).</p>
                        </div>
                    </div>
                    <div class="charts-row">
                        <div class="chart-container glass-panel">
                            <h3>Problemas / Aspectos Negativos</h3>
                            <div class="canvas-wrapper"><canvas id="chartNegativos"></canvas></div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">Nota:
                                Muestra evolución de barreras. Elaboración propia.</p>
                        </div>
                    </div>
                </div>

                <!-- TAB 2: PARACEL Y COMUNICACION -->
                <div class="tab-content" id="tab-paracel" style="display: none;">
                    <h2 class="tab-title">Percepción sobre Paracel</h2>
                    <div class="charts-row">
                        <div class="chart-container glass-panel">
                            <h3>Expectativas Positivas sobre la Fábrica</h3>
                            <div class="canvas-wrapper"><canvas id="chartExpectativas"></canvas></div>
                        </div>
                        <div class="chart-container glass-panel">
                            <h3 title="Desglose general de temores en todos los años seleccionados">Temores /
                                Preocupaciones sobre la Fábrica (General)</h3>
                            <div class="canvas-wrapper"><canvas id="chartTemores"></canvas></div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">
                                Interpretación: Distribución porcentual agregada de principales temores.</p>
                        </div>
                    </div>
                    <div class="charts-row">
                        <div class="chart-container glass-panel">
                            <h3>Recepción de Información (Medios) <span style="cursor:help;"
                                    title="Barras agrupadas por año comparando penetración mediática">(i)</span></h3>
                            <div class="canvas-wrapper"><canvas id="chartMedios"></canvas></div>
                        </div>
                    </div>
                </div>

                <!-- TAB 3: PERFIL DEMOGRAFICO -->
                <div class="tab-content" id="tab-perfil" style="display: none;">
                    <h2 class="tab-title">Perfil Sociodemográfico</h2>

                    <div class="charts-row">
                        <div class="chart-container glass-panel">
                            <h3 title="Comparación temporal de nivel educativo alcanzado">Nivel de Estudios <span
                                    style="cursor:help; color:var(--paracel-blue);"
                                    title="Gráfico de series por año">(i)</span></h3>
                            <div class="canvas-wrapper" style="min-height: 350px;"><canvas id="chartEstudios"></canvas>
                            </div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">
                                Interpretación: Distribución educacional de encuestados iterando entre cada ola en %.
                                Fuente: Datos Encuesta Nauta.</p>
                        </div>
                        <div class="chart-container glass-panel">
                            <h3 title="Ocupación principal actual">Situación Laboral <span
                                    style="cursor:help; color:var(--paracel-blue);"
                                    title="Gráfico agrupado y seriado por año">(i)</span></h3>
                            <div class="canvas-wrapper" style="min-height: 350px;"><canvas id="chartTrabajo"></canvas>
                            </div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">
                                Interpretación: Evolución porcentual de los distintos sectores de trabajo de la
                                comunidad encuestada.</p>
                        </div>
                    </div>

                    <div class="charts-row">
                        <div class="chart-container glass-panel">
                            <h3 title="Ingresos familiares sumados de hogar">Ingresos Familiares (Series Interanuales)
                            </h3>
                            <div class="canvas-wrapper"><canvas id="chartIngresos"></canvas></div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">Nota:
                                Auto-reportado según bandas de ingreso económico.</p>
                        </div>
                    </div>

                </div> <!-- Fin Tab 3 -->

                <!-- TAB 4: PANEL LONGITUDINAL -->
                <div class="tab-content" id="tab-panel" style="display: none;">
                    <h2 class="tab-title">Evolución Longitudinal (Muestra Panel)</h2>
                    <p style="color:var(--text-sec); font-size:14px; margin-bottom:15px;">
                        Estos gráficos aíslan exclusivamente a las mismas personas encuestadas en múltiples años,
                        revelando cambios puramente de su percepción a través del tiempo. Asegúrate de encender el
                        filtro "Tipo de Muestra: Sí" a la izquierda.
                    </p>

                    <div class="charts-row">
                        <div class="chart-container glass-panel">
                            <h3 title="Líneas de tiempo conectando participantes fijos.">Aspectos Positivos de la
                                Comunidad (Muestra Panel)</h3>
                            <div class="canvas-wrapper"><canvas id="chartPanelPositivos"></canvas></div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">
                                Interpretación de Series temporales: Cada línea demuestra de izquierda a derecha la
                                evolución analítica intra-sujeto (en los mismos encuestados) a medida que pasó el
                                tiempo.</p>
                        </div>
                    </div>

                    <div class="charts-row">
                        <div class="chart-container glass-panel">
                            <h3 title="Optimismos históricos por ola sobre los panelistas idénticos">Expectativas sobre
                                la Fábrica (Muestra Panel)</h3>
                            <div class="canvas-wrapper"><canvas id="chartPanelExpectativas"></canvas></div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">Nota:
                                Util para correlacionar factores del "antes vs después" sin distracción de la población
                                flotante.</p>
                        </div>
                    </div>
                </div> <!-- Fin Tab 4 -->

            </main>
        </div>
    </div>

    <!-- JS -->
    <script src="script.js"></script>
</body>

</html>