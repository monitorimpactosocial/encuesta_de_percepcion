<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Interactivo - Percepci贸n Social Paracel</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <!-- Data -->
    <script src="data.js"></script>
</head>

<body>

    <!-- PANTALLA DE LOGIN -->
    <div id="login-screen" class="glass-container">
        <div class="login-box">
            <img src="LOGO_PARA_FONDO_NEGRO.png" alt="Logo Paracel" class="logo-login">
            <h2>Acceso al Dashboard</h2>
            <p>Monitoreo de Impacto Social</p>
            <div class="input-group">
                <input type="text" id="username" placeholder="Usuario" autocomplete="off">
            </div>
            <div class="input-group">
                <input type="password" id="password" placeholder="Contrase帽a">
            </div>
            <p id="login-error" class="error-msg" style="display: none;">Credenciales incorrectas.</p>
            <button id="btn-login" class="btn-primary">Ingresar</button>
        </div>
    </div>

    <!-- PANTALLA DEL DASHBOARD (Oculta por defecto) -->
    <div id="dashboard-screen" style="display: none;">

        <!-- NAVBAR -->
        <nav class="navbar glass-navbar">
            <div class="nav-left">
                <img src="LOGO_PARA_FONDO_NEGRO.png" alt="Logo Paracel" class="logo-nav">
                <h1>Monitoreo de Percepci贸n (2022 - 2024)</h1>
            </div>
            <div class="nav-right" style="display:flex; align-items:center; gap:15px;">
                <span id="total-encuestas" style="font-weight:bold;">Total Encuestas: 0</span>
                <button id="btn-theme" class="btn-outline" style="padding:5px 10px; font-size:12px; cursor:pointer;"
                    title="Cambiar a Modo Oscuro"> Dark</button>
                <button id="btn-export" class="btn-outline" style="padding:5px 10px; font-size:12px;">Exportar
                    PNG</button>
                <button id="btn-logout" class="btn-secondary" style="padding:5px 10px; font-size:12px;">Cerrar
                    Sesi贸n</button>
            </div>
        </nav>

        <div class="main-layout">
            <!-- SIDEBAR FILTROS -->
            <aside class="sidebar glass-panel">
                <h3>Filtros Din谩micos</h3>
                <p class="filter-instructions">Selecciona uno o m谩s botones para filtrar los datos.</p>

                <div class="filter-group">
                    <label title="A铆sla personas que respondieron encuestas en m煤ltiples a帽os.">
                        Tipo de Muestra <span style="cursor:help; color:var(--paracel-blue);"
                            title="S铆 = Panelistas a lo largo del tiempo. No = Encuestados 煤nicos. Todos = Sin filtro.">(i)</span>
                    </label>
                    <div class="filter-buttons" id="filter-muestra"></div>
                </div>

                <div class="filter-group">
                    <label title="Filtra los resultados por la ola de ejecuci贸n.">
                        A帽o de la Ola <span style="cursor:help; color:var(--paracel-blue);"
                            title="Selecciona uno con clic simple. Selecciona m煤ltiples a la vez manteniendo presionada la tecla CTRL.">(i)</span>
                    </label>
                    <div class="filter-buttons" id="filter-anio"></div>
                </div>

                <div class="filter-group">
                    <label>G茅nero</label>
                    <div class="filter-buttons" id="filter-genero"></div>
                </div>

                <div class="filter-group">
                    <label>Rango de Edad</label>
                    <div class="filter-buttons" id="filter-edad"></div>
                </div>

                <div class="filter-group">
                    <label>Nivel Socioecon贸mico (NSE)</label>
                    <div class="filter-buttons" id="filter-nse"></div>
                </div>

                <div class="filter-group">
                    <label>Comunidad</label>
                    <div class="filter-buttons" id="filter-comunidad"></div>
                </div>

                <button id="btn-reset" class="btn-outline">Restablecer Todos</button>
            </aside>

            <!-- ZONA DE PESTAAS Y GRAFICOS -->
            <main class="dashboard-content">

                <!-- KPI HEADER -->
                <div class="kpi-header" style="display:flex; gap:15px; margin-bottom:20px;">
                    <div class="kpi-card"
                        style="flex:1; background:var(--glass-bg); padding:15px; border-radius:8px; border:1px solid var(--glass-border); border-left:4px solid var(--accent); box-shadow:0 4px 6px rgba(0,0,0,0.05);">
                        <h4 style="margin:0; font-size:12px; color:var(--text-sec); text-transform:uppercase;">Encuestas
                            Efectivas (N)</h4>
                        <p id="kpi-total" style="margin:5px 0 0; font-size:24px; font-weight:700; color:var(--accent);">
                            -</p>
                    </div>
                    <div class="kpi-card"
                        style="flex:1; background:var(--glass-bg); padding:15px; border-radius:8px; border:1px solid var(--glass-border); border-left:4px solid var(--paracel-blue); box-shadow:0 4px 6px rgba(0,0,0,0.05);">
                        <h4 style="margin:0; font-size:12px; color:var(--text-sec); text-transform:uppercase;">
                            Percepci贸n Positiva a Paracel</h4>
                        <p id="kpi-positiva"
                            style="margin:5px 0 0; font-size:24px; font-weight:700; color:var(--paracel-blue);">-</p>
                    </div>
                    <div class="kpi-card"
                        style="flex:1; background:var(--glass-bg); padding:15px; border-radius:8px; border:1px solid var(--glass-border); border-left:4px solid #ef4444; box-shadow:0 4px 6px rgba(0,0,0,0.05);">
                        <h4 style="margin:0; font-size:12px; color:var(--text-sec); text-transform:uppercase;">Top #1
                            Problema</h4>
                        <p id="kpi-problema"
                            style="margin:5px 0 0; font-size:16px; font-weight:700; color:#ef4444; line-height:1.2;">-
                        </p>
                    </div>
                    <div class="kpi-card"
                        style="flex:1; background:var(--glass-bg); padding:15px; border-radius:8px; border:1px solid var(--glass-border); border-left:4px solid var(--orange-accent); box-shadow:0 4px 6px rgba(0,0,0,0.05);">
                        <h4 style="margin:0; font-size:12px; color:var(--text-sec); text-transform:uppercase;">Top #1
                            Atributo Lider</h4>
                        <p id="kpi-atributo"
                            style="margin:5px 0 0; font-size:16px; font-weight:700; color:var(--orange-accent); line-height:1.2;">
                            -</p>
                    </div>
                </div>

                <!-- TABS NAV -->
                <div class="tabs-nav">
                    <button class="tab-btn active" data-tab="tab-comunidad">1. Comunidad</button>
                    <button class="tab-btn" data-tab="tab-paracel">2. F谩brica y Comunicaci贸n</button>
                    <button class="tab-btn" data-tab="tab-perfil">3. Perfil Demogr谩fico</button>
                    <button class="tab-btn" data-tab="tab-evolucion"
                        style="color:var(--orange-accent); font-weight:800;">4. Evoluci贸n Clave (2022-2025)</button>
                </div>

                <!-- TAB 1: COMUNIDAD -->
                <div class="tab-content active" id="tab-comunidad">
                    <h2 class="tab-title">Percepci贸n de la Comunidad</h2>
                    <div class="charts-row">
                        <div class="chart-container glass-panel">
                            <h3 title="Comparaci贸n porcentual de aspectos positivos mencionados a trav茅s de los a帽os.">
                                Aspectos Positivos de la Comunidad <span style="cursor:help;"
                                    title="Valores en porcentaje de menciones totales en el a帽o">(i)</span></h3>
                            <div class="canvas-wrapper"><canvas id="chartPositivos"></canvas></div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">Nota:
                                Iteraci贸n anual. Fuente: Encuestas Nauta (2022-2025).</p>
                        </div>
                    </div>
                    <div class="charts-row">
                        <div class="chart-container glass-panel">
                            <h3>Problemas / Aspectos Negativos</h3>
                            <div class="canvas-wrapper"><canvas id="chartNegativos"></canvas></div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">Nota:
                                Muestra evoluci贸n de barreras. Elaboraci贸n propia.</p>
                        </div>
                    </div>
                </div>

                <!-- TAB 2: PARACEL Y COMUNICACION -->
                <div class="tab-content" id="tab-paracel" style="display: none;">
                    <h2 class="tab-title">Percepci贸n sobre Paracel</h2>
                    <div class="charts-row">
                        <div class="chart-container glass-panel">
                            <h3>Expectativas Positivas sobre la F谩brica</h3>
                            <div class="canvas-wrapper"><canvas id="chartExpectativas"></canvas></div>
                        </div>
                        <div class="chart-container glass-panel">
                            <h3 title="Desglose general de temores en todos los a帽os seleccionados">Temores /
                                Preocupaciones sobre la F谩brica (General)</h3>
                            <div class="canvas-wrapper"><canvas id="chartTemores"></canvas></div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">
                                Interpretaci贸n: Distribuci贸n porcentual agregada de principales temores.</p>
                        </div>
                    </div>
                    <div class="charts-row">
                        <div class="chart-container glass-panel">
                            <h3>Recepci贸n de Informaci贸n (Medios) <span style="cursor:help;"
                                    title="Barras agrupadas por a帽o comparando penetraci贸n medi谩tica">(i)</span></h3>
                            <div class="canvas-wrapper"><canvas id="chartMedios"></canvas></div>
                        </div>
                    </div>
                </div>

                <!-- TAB 3: PERFIL DEMOGRAFICO -->
                <div class="tab-content" id="tab-perfil" style="display: none;">
                    <h2 class="tab-title">Perfil Sociodemogr谩fico</h2>

                    <div class="charts-row">
                        <div class="chart-container glass-panel">
                            <h3 title="Comparaci贸n temporal de nivel educativo alcanzado">Nivel de Estudios <span
                                    style="cursor:help; color:var(--paracel-blue);"
                                    title="Gr谩fico de series por a帽o">(i)</span></h3>
                            <div class="canvas-wrapper" style="min-height: 350px;"><canvas id="chartEstudios"></canvas>
                            </div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">
                                Interpretaci贸n: Distribuci贸n educacional de encuestados iterando entre cada ola en %.
                                Fuente: Datos Encuesta Nauta.</p>
                        </div>
                        <div class="chart-container glass-panel">
                            <h3 title="Ocupaci贸n principal actual">Situaci贸n Laboral <span
                                    style="cursor:help; color:var(--paracel-blue);"
                                    title="Gr谩fico agrupado y seriado por a帽o">(i)</span></h3>
                            <div class="canvas-wrapper" style="min-height: 350px;"><canvas id="chartTrabajo"></canvas>
                            </div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">
                                Interpretaci贸n: Evoluci贸n porcentual de los distintos sectores de trabajo de la
                                comunidad encuestada.</p>
                        </div>
                    </div>

                    <div class="charts-row">
                        <div class="chart-container glass-panel">
                            <h3 title="Ingresos familiares sumados de hogar">Ingresos Familiares (Series Interanuales)
                            </h3>
                            <div class="canvas-wrapper"><canvas id="chartIngresos"></canvas></div>
                            <p class="chart-note" style="font-size:11px; color:var(--text-sec); margin-top:10px;">Nota:
                                Auto-reportado seg煤n bandas de ingreso econ贸mico.</p>
                        </div>
                    </div>

                </div> <!-- Fin Tab 3 -->

                <!-- TAB 4: EVOLUCION -->
                <div class="tab-content" id="tab-evolucion" style="display: none;">
                    <h2 class="tab-title" style="color:var(--accent); border-bottom-color:var(--orange-accent);">
                        Indicadores Evolutivos Clave (2022-2025)</h2>
                    <p style="color:var(--text-sec); font-size:14px; margin-bottom:15px;">
                        Estos gr谩ficos muestran los cambios m谩s significativos en la percepci贸n y situaci贸n de las
                        comunidades a trav茅s del tiempo. Se recomienda visualizar con todos los a帽os seleccionados
                        (marcando con la tecla CTRL).
                    </p>

                    <div class="charts-row">
                        <div class="chart-container">
                            <h3 title="Tendencia de favorabilidad a lo largo de los a帽os">1. Percepci贸n Positiva de
                                Paracel (%)</h3>
                            <div class="canvas-wrapper"><canvas id="chartEvolPositiva"></canvas></div>
                            <p class="chart-note">Interpretaci贸n: Curva hist贸rica que visualiza el pico de aceptaci贸n y
                                desgaste de expectativas (l铆nea).</p>
                        </div>
                        <div class="chart-container">
                            <h3 title="El problema cr铆tico en constante crecimiento">2. Falta de Oferta Laboral como
                                Problema (%)</h3>
                            <div class="canvas-wrapper"><canvas id="chartEvolFaltaLaboral"></canvas></div>
                            <p class="chart-note">Interpretaci贸n: Preocupaci贸n comunitaria constante por el empleo local
                                vs avances del proyecto (barras).</p>
                        </div>
                    </div>

                    <div class="charts-row">
                        <div class="chart-container">
                            <h3 title="Cambio en atributos l铆deres de las comunidades">3. Atributos: Tranquilidad vs La
                                Gente</h3>
                            <div class="canvas-wrapper"><canvas id="chartEvolAtributos"></canvas></div>
                            <p class="chart-note">Interpretaci贸n: Desplazamiento de "La tranquilidad" por "La gente"
                                como aspecto m谩s valorado (barras agrupadas).</p>
                        </div>
                        <div class="chart-container">
                            <h3 title="Reducci贸n del desconocimiento 'No sabe' vs 'Celulosa/Eucalipto'">4.
                                Desconocimiento vs Comprensi贸n</h3>
                            <div class="canvas-wrapper"><canvas id="chartEvolProduccion"></canvas></div>
                            <p class="chart-note">Interpretaci贸n: Reducci贸n del "NS/NR" sobre la producci贸n a favor del
                                "Eucalipto/Celulosa" (谩reas/barras).</p>
                        </div>
                    </div>

                    <div class="charts-row">
                        <div class="chart-container">
                            <h3 title="Creaci贸n de puestos vs Mejoras en caminos">5. Beneficios vs Expectativas Reales
                            </h3>
                            <div class="canvas-wrapper"><canvas id="chartEvolBeneficios"></canvas></div>
                            <p class="chart-note">Interpretaci贸n: Ca铆da en percepci贸n de nuevos empleos contra un
                                aparente aumento en valoraci贸n infraestructural (l铆nea).</p>
                        </div>
                        <div class="chart-container">
                            <h3 title="Fuentes de informaci贸n dominantes">6. Canales de Comunicaci贸n Relevantes</h3>
                            <div class="canvas-wrapper"><canvas id="chartEvolCanales"></canvas></div>
                            <p class="chart-note">Interpretaci贸n: Crecimiento de canales directos y digitales frente a
                                rumores (barras apiladas o sectores).</p>
                        </div>
                    </div>
                </div> <!-- Fin Tab 4 -->

            </main>
        </div>
    </div>

    <!-- JS -->
    <script src="script.js"></script>
</body>

</html>